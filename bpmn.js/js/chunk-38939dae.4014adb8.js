(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38939dae"],{"29bd":function(e,t,a){"use strict";var s=a("b0d1"),n=a.n(s);n.a},b0d1:function(e,t,a){var s=a("e241");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=a("85cb4").default;n("6388752e",s,!0,{sourceMap:!1,shadowMode:!1})},d924:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"containers"},[a("div",{ref:"canvas",staticClass:"canvas"}),a("ul",{staticClass:"buttons"},[a("li",[a("a",{ref:"saveDiagram",staticClass:"active",attrs:{href:"javascript:",title:"保存为bpmn"}},[e._v("保存为bpmn")])]),a("li",[a("a",{ref:"saveSvg",staticClass:"active",attrs:{href:"javascript:",title:"保存为svg"}},[e._v("保存为svg")])]),a("li",[a("a",{staticClass:"active",attrs:{href:"javascript:",title:"撤销操作"},on:{click:e.handlerUndo}},[e._v("撤销")])]),a("li",[a("a",{staticClass:"active",attrs:{href:"javascript:",title:"恢复操作"},on:{click:e.handlerRedo}},[e._v("恢复")])]),a("li",[a("a",{staticClass:"active",attrs:{href:"javascript:",title:"放大"},on:{click:function(t){return e.handlerZoom(.1)}}},[e._v("放大")])]),a("li",[a("a",{staticClass:"active",attrs:{href:"javascript:",title:"缩小"},on:{click:function(t){return e.handlerZoom(-.1)}}},[e._v("缩小")])]),a("li",[a("a",{staticClass:"active",attrs:{href:"javascript:",title:"还原"},on:{click:function(t){return e.handlerZoom(0)}}},[e._v("还原")])])]),a("Drawer",{attrs:{title:"Create",width:"720","mask-closable":!1},model:{value:e.userTask,callback:function(t){e.userTask=t},expression:"userTask"}},[a("Form",{attrs:{model:e.formData}},[a("FormItem",{attrs:{label:"节点类型","label-position":"top"}},[a("Input",{attrs:{disabled:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),a("FormItem",{attrs:{label:"节点名称","label-position":"top"}},[a("Input",{attrs:{placeholder:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"处理场景","label-position":"top"}},[a("Select",[a("Option",{attrs:{value:"beijing"}},[e._v("先派单后处理")]),a("Option",{attrs:{value:"shanghai",disabled:""}},[e._v("London")]),a("Option",{attrs:{value:"shenzhen"}},[e._v("Sydney")])],1)],1),a("FormItem",{attrs:{label:"处理人","label-position":"top"}},[a("Select",{attrs:{multiple:""}},[a("Option",{attrs:{value:"beijing"}},[e._v("ops-coffee")]),a("Option",{attrs:{value:"shanghai",disabled:""}},[e._v("London")]),a("Option",{attrs:{value:"shenzhen"}},[e._v("Sydney")])],1)],1),a("FormItem",{attrs:{label:"是否可转单","label-position":"top"}},[a("RadioGroup",[a("Radio",{attrs:{label:"yes"}},[a("span",[e._v("是")])]),a("Radio",{attrs:{label:"no"}},[a("span",[e._v("否")])])],1)],1),a("FormItem",{attrs:{label:"是否可终止","label-position":"top"}},[a("RadioGroup",[a("Radio",{attrs:{label:"yes"}},[a("span",[e._v("是")])]),a("Radio",{attrs:{label:"no"}},[a("span",[e._v("否")])])],1)],1)],1),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.userTask=!1}}},[e._v("Cancel")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.userTask=!1}}},[e._v("Submit")])],1)],1),a("Drawer",{attrs:{title:"Create",width:"720","mask-closable":!1},model:{value:e.serviceTask,callback:function(t){e.serviceTask=t},expression:"serviceTask"}},[a("Form",{attrs:{model:e.formData}},[a("FormItem",{attrs:{label:"节点类型","label-position":"top"}},[a("Input",{attrs:{disabled:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),a("FormItem",{attrs:{label:"节点名称","label-position":"top"}},[a("Input",{attrs:{placeholder:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"URL","label-position":"top"}},[a("Input",{attrs:{placeholder:""},model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url",t)},expression:"formData.url"}})],1),a("FormItem",{attrs:{label:"","label-position":"top"}},[a("RadioGroup",[a("Radio",{attrs:{label:"get"}},[a("span",[e._v("GET")])]),a("Radio",{attrs:{label:"post"}},[a("span",[e._v("POST")])]),a("Radio",{attrs:{label:"put"}},[a("span",[e._v("PUT")])]),a("Radio",{attrs:{label:"delete"}},[a("span",[e._v("DELETE")])])],1)],1),a("FormItem",{attrs:{label:"Header","label-position":"top"}},[a("Input",{attrs:{placeholder:""},model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url",t)},expression:"formData.url"}})],1),a("FormItem",{attrs:{label:"参数","label-position":"top"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:""},model:{value:e.formData.desc,callback:function(t){e.$set(e.formData,"desc",t)},expression:"formData.desc"}})],1)],1),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.serviceTask=!1}}},[e._v("Cancel")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.serviceTask=!1}}},[e._v("Submit")])],1)],1),a("Drawer",{attrs:{title:"Create",width:"720","mask-closable":!1},model:{value:e.scriptTask,callback:function(t){e.scriptTask=t},expression:"scriptTask"}},[a("Form",{attrs:{model:e.formData}},[a("FormItem",{attrs:{label:"状态","label-position":"top"}},[a("RadioGroup",{model:{value:e.sequenceFlow,callback:function(t){e.sequenceFlow=t},expression:"sequenceFlow"}},[a("Radio",{attrs:{label:"通过"}},[a("span",[e._v("通过")])]),a("Radio",{attrs:{label:"不通过"}},[a("span",[e._v("不通过")])])],1)],1)],1),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.scriptTask=!1}}},[e._v("Cancel")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.scriptTask=!1}}},[e._v("Submit")])],1)],1)],1)},n=[],o=(a("fe59"),a("053b"),a("65fd")),i=a("bf4a"),r=(a("cb35"),{name:"",components:{},created:function(){},mounted:function(){this.init()},data:function(){return{bpmnModeler:null,container:null,canvas:null,scale:1,userTask:!1,serviceTask:!1,scriptTask:!1,sequenceFlow:"",formData:{name:"",type:""}}},methods:{init:function(){var e=this.$refs.canvas;this.bpmnModeler=new i["a"]({container:e,additionalModules:[{labelEditingProvider:["value",""]}]}),this.createNewDiagram()},createNewDiagram:function(){var e=this;this.bpmnModeler.importXML(o["a"],(function(t){t||e.success()}))},success:function(){this.addBpmnListener(),this.addModelerListener(),this.addEventBusListener()},addModelerListener:function(){var e=this.bpmnModeler,t=this,a=["shape.added","shape.move.end","shape.removed","connect.end","connect.move"];a.forEach((function(a){t.bpmnModeler.on(a,(function(t){console.log(a,t);var s=e.get("elementRegistry"),n=t.element?s.get(t.element.id):t.shape;console.log(n)}))}))},addBpmnListener:function(){var e=this,t=this.$refs.saveDiagram,a=this.$refs.saveSvg;this.bpmnModeler.on("commandStack.changed",(function(){e.saveSVG((function(t,s){e.setEncoded(a,"diagram.svg",t?null:s)})),e.saveDiagram((function(a,s){e.setEncoded(t,"diagram.bpmn",a?null:s)}))}))},saveSVG:function(e){this.bpmnModeler.saveSVG(e)},saveDiagram:function(e){this.bpmnModeler.saveXML({format:!0},(function(t,a){e(t,a)}))},setEncoded:function(e,t,a){var s=encodeURIComponent(a);a&&(e.href="data:application/bpmn20-xml;charset=UTF-8,"+s,e.download=t)},handlerRedo:function(){this.bpmnModeler.get("commandStack").redo()},handlerUndo:function(){this.bpmnModeler.get("commandStack").undo()},handlerZoom:function(e){var t=e?this.scale+e:1;this.bpmnModeler.get("canvas").zoom(t),this.scale=t},addEventBusListener:function(){var e=this.bpmnModeler.get("eventBus"),t=this.bpmnModeler.get("modeling"),a=this.bpmnModeler.get("elementRegistry");e.on("element.click",(function(e){if(console.log("点击了element",e.element.businessObject.id,e.element.businessObject.$type,e.element.businessObject.name),"bpmn:SequenceFlow"==e.element.businessObject.$type){var s=e.element.businessObject.sourceRef;if("bpmn:ExclusiveGateway"==s.$type){var n=a.get(s.id);t.updateProperties(n,{default:e.element.businessObject})}}}))}},computed:{task:{get:function(){var e=this,t=this.$store.state.bpmn.nodeInfo;return t.businessObject&&(console.log(t.businessObject.id,t.businessObject.name,t.businessObject.$type),"bpmn:UserTask"===t.businessObject.$type&&(e.formData.type="用户任务",e.formData.name=t.businessObject.name,e.userTask=this.$store.state.bpmn.nodeVisible),"bpmn:ServiceTask"===t.businessObject.$type&&(e.formData.type="服务任务",e.formData.name=t.businessObject.name,e.serviceTask=this.$store.state.bpmn.nodeVisible),"bpmn:ScriptTask"===t.businessObject.$type&&(e.formData.type="脚本任务",e.formData.name=t.businessObject.name,e.serviceTask=this.$store.state.bpmn.nodeVisible),"bpmn:SequenceFlow"===t.businessObject.$type&&(e.sequenceFlow=t.businessObject.name,e.scriptTask=this.$store.state.bpmn.nodeVisible)),!1},set:function(e){this.$store.state.bpmn.nodeVisible=e}}},watch:{task:function(e){},userTask:function(e){this.$store.state.bpmn.nodeVisible=e},serviceTask:function(e){this.$store.state.bpmn.nodeVisible=e},scriptTask:function(e){this.$store.state.bpmn.nodeVisible=e},sequenceFlow:function(e){var t=this.$store.state.bpmn.nodeInfo,a=this.bpmnModeler.get("modeling");a.updateLabel(t,e)},"formData.name":{handler:function(e,t){var a=this.$store.state.bpmn.nodeInfo,s=this.bpmnModeler.get("modeling");s.updateLabel(a,e)},deep:!0}}}),l=r,c=(a("29bd"),a("9ca4")),d=Object(c["a"])(l,s,n,!1,null,"1dafe638",null);t["default"]=d.exports},e241:function(e,t,a){var s=a("a1a8f");t=s(!1),t.push([e.i,".containers[data-v-1dafe638]{background:#fff;overflow:auto;background-image:linear-gradient(90deg,hsla(0,0%,86.3%,.5) 6%,transparent 0),linear-gradient(hsla(0,0%,75.3%,.5) 6%,transparent 0);background-size:12px 12px;width:100%;height:calc(100vh - 125px);-webkit-tap-highlight-color:rgba(255,255,255,0)}.canvas[data-v-1dafe638]{width:100%;height:100%}.panel[data-v-1dafe638]{right:0;top:0;width:300px}.buttons[data-v-1dafe638],.panel[data-v-1dafe638]{position:absolute}.buttons[data-v-1dafe638]{left:20px;bottom:20px}.buttons li[data-v-1dafe638]{display:inline-block;margin:5px}.buttons li a[data-v-1dafe638]{color:#999;background:#eee;cursor:not-allowed;padding:8px;border:1px solid #ccc;text-decoration:none}.buttons li a.active[data-v-1dafe638]{color:#333;background:#fff;cursor:pointer}.demo-drawer-footer[data-v-1dafe638]{width:100%;position:absolute;bottom:0;left:0;border-top:1px solid #e8e8e8;padding:10px 16px;text-align:right;background:#fff}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-38939dae.4014adb8.js.map